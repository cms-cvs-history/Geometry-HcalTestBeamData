process PROD  = {

   service = MessageLogger {
      untracked vstring destinations = {"cout"}      
      untracked vstring categories = { "G4cout", "G4cerr", "HCalGeom" }
      untracked vstring debugModules   = { "*" }
      untracked PSet cout =  {untracked string threshold = "DEBUG"
         untracked PSet default      = { untracked int32 limit =  0 } 
	 untracked PSet G4cerr       = { untracked int32 limit = -1 } 
	 untracked PSet G4cout       = { untracked int32 limit = -1 } 
         untracked PSet HCalGeom     = { untracked int32 limit = -1 }
      }
    }
   
   service = Timing {}

   service = RandomNumberGeneratorService {
      untracked uint32 sourceSeed = 98765
      PSet moduleSeeds = {
         untracked uint32 VtxSmeared = 12345
         untracked uint32 g4SimHits = 9876
      }
   }
   
   block common_beam_direction_parameters = {
         untracked double MinEta =  0.5655
         untracked double MaxEta =  0.5655
         untracked double MinPhi = -0.1309
         untracked double MaxPhi = -0.1309
         untracked double BeamPosition = -800.00
   }
   include "SimGeneral/HepPDTESSource/data/pdt.cfi"
      
   # flat random E-gun, single pion
   #
   # to run it along with CMS detector simulation
   # (OscarProducer) make sure to select QGSP physics
   # list, instead DummyPhysics ("Dummy" has only EM 
   # process and wont know to model interactions of
   # hadrons with matter)
   #
   source = FlatRandomEGunSource  {
      untracked PSet PGunParameters =  {
         untracked vint32 PartID = {211}
         using common_beam_direction_parameters
         untracked double MinE   =  9.99
         untracked double MaxE   = 10.01
      }
      untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
   }
    untracked PSet maxEvents = {untracked int32 input = 1}

   #Geometry
   #   
   include "Geometry/HcalTestBeamData/test/2007/TB2007GeometryXML.cfi"

   # Geant4-based CMS Det.Simulation
   #
   # the 'replace' option below show how to override the default
   # setting of mag.field key (tu turn it off)
   #
   block common_heavy_suppression1 = {
           double IonThreshold     = 30.0
           double NeutronThreshold = 30.0
           double ProtonThreshold  = 30.0
   }
   include "SimG4Core/Application/data/g4SimHits.cfi"
   replace g4SimHits.UseMagneticField        = false
   replace g4SimHits.Physics.DefaultCutValue = 1. # cuts in cm, i.e. 10m
   replace g4SimHits.Generator.HepMCProductLabel = "source"
   replace g4SimHits.StackingAction = {
           bool   TrackNeutrino    = false
           bool   KillHeavy        = false
           using common_heavy_suppression1
           untracked bool SavePrimaryDecayProductsAndConversions = false
   }
   replace g4SimHits.CaloSD =  {
         double EminTrack = 1.0
         bool   SuppressHeavy = false
         using common_heavy_suppression1
         untracked int32  CheckHits = 25
         untracked bool   UseMap = true
         untracked int32  Verbosity = 0
         untracked bool   DetailedTiming = false
         untracked bool   CorrectTOFBeam = false
         using common_beam_direction_parameters
    }
    replace g4SimHits.HCalSD.UseShowerLibrary = false
    replace g4SimHits.HCalSD.TestNumberingScheme = true
    replace g4SimHits.HCalSD.UseHF     = false
    replace g4SimHits.HCalSD.ForTBH2   = true
    replace g4SimHits.CaloTrkProcessing.TestBeam  = true
    replace g4SimHits.Watchers = {
         {          string type      = "CheckOverlap"
         untracked string NodeName   = ""
         untracked int32  Resolution = 1000
    } }
		
   
   path p1 = { g4SimHits }
}		
